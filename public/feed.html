<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gramatike Feed</title>
  <link href="https://fonts.googleapis.com/css2?family=Mansalva&display=swap" rel="stylesheet">
  <style>
    :root {
      --lilas: #c08adc;
      --roxo: #a76bc4;
      --roxo-solid: #b488db;
      --roxo-header: #c08adc;
      --lilas-light: #f6f5fa;
      --card-radius: 24px;
      --shadow-card: 0 5px 22px 0 #c08adc19, 0 1px 4px #c08adc27;
      --shadow-btn: 0 1.5px 5px #c08adc29;
    }
    html,body {margin:0;padding:0;background: var(--lilas-light);}
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    /* NAV */
    nav {
      background: var(--roxo-header);
      border-bottom-left-radius: 32px;
      border-bottom-right-radius: 32px;
      min-height: 60px;
      box-shadow: var(--shadow-card);
      position: sticky; top: 0; z-index: 100;
    }
    .nav-bar {
      max-width: 1140px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 17px 28px 13px 28px;
      justify-content: flex-start;
    }
    .logo {
      font-family: 'Mansalva', cursive;
      font-size: 28px;
      color: #fff;
      margin-right: 12px;
      letter-spacing: 0.2px;
    }
    .search-bar {
      flex: 1;
      display: flex;
      align-items: center;
      background: #fff;
      border-radius: 18px;
      box-shadow: var(--shadow-btn);
      margin-right: 12px;
      height: 38px;
    }
    .search-bar input {
      border: none;
      border-radius: 18px 0 0 18px;
      padding: 0 14px;
      font-size: 16px;
      outline: none;
      background: transparent;
      flex: 1;
      height: 100%;
      color: #786bb4;
      font-weight: 500;
    }
    .search-bar button {
      background: var(--roxo);
      border: none;
      color: #fff;
      border-radius: 0 18px 18px 0;
      width: 43px;
      height: 38px;
      font-size: 21px;
      cursor: pointer;
      box-shadow: none;
      display: flex; align-items: center; justify-content: center;
      transition: filter .2s;
    }
    .search-bar button:hover { filter: brightness(1.07); }
    .nav-actions {
      display: flex;
      gap: 13px;
      align-items: center;
    }
    .nav-btn {
      background: var(--roxo);
      color: #fff;
      border: none;
      border-radius: 14px;
      font-size: 22px;
      width: 40px; height: 40px;
      display: flex; align-items: center; justify-content: center;
      box-shadow: var(--shadow-btn);
      cursor: pointer;
      transition: filter .2s;
      font-weight: 600;
    }
    .nav-btn:hover { filter: brightness(1.09);}
    /* avatar + arroba nav */
    .user-mini {
      display: flex;
      align-items: center; gap:8px;
    }
    .avatar-circulo {
      width: 36px; height: 36px; min-width:36px; min-height:36px;
      border-radius: 50%;
      background: #fff;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 1.5px 7px #c08adc1c;
      border: 2px solid #fff;
      box-sizing: border-box;
    }
    .avatar-circulo img {
      width: 34px; height: 34px;
      border-radius: 50%; object-fit: cover;
    }
    .avatar-circulo.avatar-placeholder {
      background: #e2dbed url('data:image/svg+xml;utf8,<svg fill="rgb(176,136,218)" height="36" viewBox="0 0 32 32" width="36" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="12" r="8"/><ellipse cx="16" cy="28" rx="13" ry="8"/></svg>') center/60% no-repeat;
    }
    .user-at {
      font-weight: bold;
      font-size: 15.3px;
      color: #674c93;
      text-decoration: none;
      background: #f5f1fa;
      border-radius: 18px;
      padding: 3px 13px 3px 9px;
      letter-spacing: .06px;
      margin-top:2px;
      box-shadow: 0 2px 7px #efdfff15;
      display: flex; align-items: center; height: 26.5px;
      transition: background .15s;
    }
    .user-at:hover {
      background: #ece5fc;
    }
    /* FEED main */
    .feed-container {max-width: 700px;margin: 0 auto;}
    .form-card, .post-card {
      background: #fff;
      border-radius: var(--card-radius);
      box-shadow: var(--shadow-card);
      margin: 24px 0 0 0;
      padding: 26px 32px 18px 32px;
      display: flex; flex-direction: column; gap: 8px; position: relative;
      border: 1px solid #efe9f6;
    }
    .form-card {margin-bottom: -4px;}
    .form-card form {display: flex; flex-direction: column; gap: 10px;}
    .form-card textarea {
      resize: vertical;
      min-height: 70px;
      font-size: 15px;
      border-radius: 15px;
      border: 2px solid #ece5f9;
      padding: 12px;
      font-family: inherit;
      background: #faf8ff;
      color: #222;
      outline: none;
      box-shadow: 0 1px 8px #c08adc13;
      transition: border .2s;
      margin-bottom: 3px;
    }
    .form-card textarea:focus {border-color: var(--roxo);}
    .form-card button {
      align-self: flex-end;
      background: var(--roxo);
      color: #fff;
      font-weight: bold;
      font-size: 15px;
      border: none;
      border-radius: 16px;
      padding: 8px 27px 7px 27px;
      cursor: pointer;
      margin-top: 4px;
      box-shadow: 0 2px 14px #beacd941;
      letter-spacing: .2px;
      transition: filter .16s, box-shadow .12s;
      display: flex; align-items: center; gap:9px;
    }
    .form-card button:disabled {opacity:.68;}
    .form-card button:hover {filter: brightness(1.13);}
    /* POST CARD */
    .post-header {
      display: flex; align-items: center; gap: 12px; font-size: 15px;
    }
    .post-header .avatar-circulo {width:39px;height:39px;}
    .post-header .avatar-circulo img {width:35px;height:35px;}
    .post-header .user-at {font-size: 16px;}
    .post-date {color: #a8a8d0; font-size: 13px; margin-left: 9px;}
    .post-content {margin: 8px 0 2px 0; line-height: 1.7; color:#32264c}
    .post-footer {
      display: flex; align-items: center; gap: 11px; margin-top: 6px;
    }
    .acoes-btn {
      background: #f7f4ff;
      border: 1.5px solid var(--roxo-solid);
      color: var(--roxo);
      border-radius: 18px;
      padding: 6px 18px;
      font-size: 15px;
      cursor: pointer;
      font-weight: 500;
      transition: background .17s, color .17s, border .15s;
      box-shadow: var(--shadow-btn);
      display: flex; align-items: center; gap:6px;
      outline: none;
    }
    .acoes-btn.selected, .acoes-btn:active, .acoes-btn:hover {
      background: var(--roxo);
      color: #fff; border-color: #fff;
    }
    .acoes-btn svg {width:19px;height:19px;vertical-align:middle;}
    .acoes-btn:active svg, .acoes-btn.selected svg {filter:brightness(1.7);}
    /* responsivo */
    @media (max-width: 900px){.feed-container,.nav-bar{max-width:100vw;}}
    @media (max-width: 600px){
      .post-card, .form-card {padding: 11px 5px;}
      .nav-bar{padding:6px;}
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-bar">
      <div class="logo">Gramátike</div>
      <form class="search-bar" onsubmit="return false;">
        <input type="text" placeholder="Pesquisar">
        <button type="submit" title="Buscar">
          <!-- Ícone lupa (SVG) -->
          <svg fill="#fff" width="21" height="21" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99c.39.39 1.03.39 1.42 0s.39-1.03 0-1.42l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
        </button>
      </form>
      <div class="nav-actions">
        <button class="nav-btn" title="Nova publicação">
          <!-- Ícone plus SVG -->
          <svg width="24" height="24" fill="none" stroke="#fff" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </button>
        <div class="user-mini">
          <a href="/perfil" class="avatar-circulo" id="avatar-link">
            <img src="" alt="Seu avatar" id="img-avatar-nav" onerror="this.parentNode.classList.add('avatar-placeholder');this.style.display='none';">
          </a>
          <a href="/perfil" class="user-at" id="user-at"></a>
        </div>
      </div>
    </div>
  </nav>
  <div class="feed-container">
    <div class="form-card">
      <form onsubmit="addPost(event)">
        <textarea id="post-content" maxlength="5000" placeholder="O que você está pensando?"></textarea>
        <button type="submit" id="create-btn">
          <!-- Ícone enviar SVG -->
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#fff" stroke-width="2.15" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
          Publicar
        </button>
      </form>
    </div>
    <div id="posts"></div>
  </div>
  <script>
    // Usuário logado (simulação). Se não tiver foto, deixa string vazia.
    const usuarioLogado = {
      username: "alex.mattinelli",
      avatar_url: "https://i.pravatar.cc/150?img=13"
      // avatar_url: "",
    }
    // Exemplo de posts
    const posts = [
      {
        username: "gramatike",
        avatar_url: "",
        data: "05/10/2025 12:17",
        conteudo: `Sejam bem-vindes!
Caso presenciarem algum erro, relate no Suporte ou aqui nos comentários.

#gramatike #bemvindes`
      },
      {
        username: "alex.mattinelli",
        avatar_url: "https://i.pravatar.cc/150?img=13",
        data: "04/10/2025 22:25",
        conteudo: "boa noite, não bináries! fazendo um test"
      }
    ];
    // Preenche header com usuário logado
    const imgAvatar = document.getElementById('img-avatar-nav');
    if(usuarioLogado.avatar_url){
      imgAvatar.src = usuarioLogado.avatar_url;
      imgAvatar.style.display='';
      document.getElementById('avatar-link').classList.remove('avatar-placeholder');
    } else {
      imgAvatar.src = "";
      imgAvatar.style.display='none';
      document.getElementById('avatar-link').classList.add('avatar-placeholder');
    }
    document.getElementById('user-at').textContent = "@" + usuarioLogado.username;

    // Render posts no feed
    function renderPosts() {
      let html = "";
      posts.forEach(post => {
        html += `
        <div class="post-card">
          <div class="post-header">
            <div class="avatar-circulo${!post.avatar_url ? " avatar-placeholder":""}">
              ${post.avatar_url
                ? `<img src="${post.avatar_url}" alt="avatar autor" onerror="this.parentNode.classList.add('avatar-placeholder');this.style.display='none';">`
                : ""}
            </div>
            <a class="user-at" href="/usuario/${post.username}">@${post.username}</a>
            <span class="post-date">${post.data}</span>
          </div>
          <div class="post-content">
            ${post.conteudo.replace(/\n/g, "<br>")}
          </div>
          <div class="post-footer">
            <button class="acoes-btn selected" title="Curtir">
              <svg fill="none" stroke="currentColor" stroke-width="2.1" viewBox="0 0 24 24"><path d="M12 21C12 21 4 13.481 4 8.75C4 5.272 7.152 3 10.6 3C12.09 3 13.519 3.659 14.5 4.695C15.481 3.659 16.91 3 18.4 3C21.848 3 25 5.272 25 8.75C25 13.481 17 21 17 21H12Z"/></svg>
              Curtir
            </button>
            <button class="acoes-btn" title="Comentar">
              <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 01-1.9 5.4A8.5 8.5 0 0111.5 21 8.38 8.38 0 016.1 19.1C4.31 17.4 3 14.5 3 11.5a8.5 8.5 0 018.5-8.5h1a8.5 8.5 0 018.5 8.5z"></path></svg>
              Comentar
            </button>
            <button class="acoes-btn" title="Mais opções">
              <svg width="19" height="19" fill="none" stroke="currentColor" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><circle cx="5" cy="12" r="1.6"/><circle cx="12" cy="12" r="1.6"/><circle cx="19" cy="12" r="1.6"/></svg>
            </button>
          </div>
        </div>`;
      });
      document.getElementById("posts").innerHTML = html;
    }
    renderPosts();
    // Publicação do post fake
    function addPost(e){
      e.preventDefault();
      var val = document.getElementById("post-content").value.trim();
      if(!val) return;
      posts.unshift({
        username: usuarioLogado.username,
        avatar_url: usuarioLogado.avatar_url,
        data: new Date().toLocaleDateString("pt-BR") + " " + (new Date().toLocaleTimeString("pt-BR").slice(0,5)),
        conteudo: val
      });
      document.getElementById("post-content").value="";
      renderPosts();
    }
  </script>
</body>
</html>
