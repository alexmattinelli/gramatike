<!doctype html>
<html lang="pt-BR">
<head>
	<!-- ...existing code... -->
	<style>
		/* feed / perfil improvements */
		.profile-header {
			display: flex;
			align-items: center;
			gap: 16px;
			padding: 16px;
		}
		.avatar {
			width: 72px;
			height: 72px;
			border-radius: 50%;
			overflow: hidden;
			flex: 0 0 72px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.08);
			border: 2px solid #fff;
			background: #f0f0f0;
		}
		.avatar img {
			width: 100%;
			height: 100%;
			object-fit: cover; /* garante crop central e cobertura */
			display: block;
		}
		.feed {
			display: grid;
			gap: 12px;
			grid-template-columns: 1fr;
			padding: 12px;
		}
		.feed-card {
			background: #fff;
			border-radius: 10px;
			padding: 12px;
			box-shadow: 0 6px 18px rgba(16,24,40,0.06);
			border: 1px solid rgba(16,24,40,0.04);
			transition: transform .08s ease;
		}
		.feed-card:hover { transform: translateY(-3px); }
		.feed-header {
			display: flex;
			align-items: center;
			gap: 10px;
			margin-bottom: 8px;
		}
		.feed-header .meta {
			display: flex;
			flex-direction: column;
		}
		.feed-title {
			font-weight: 700;
			margin: 0;
			font-size: 1rem;
			color: #0f172a;
		}
		.feed-time {
			font-size: 0.85rem;
			color: #64748b;
		}
		.feed-content {
			color: #0f172a;
			font-size: 0.95rem;
			line-height: 1.45;
			margin-top: 8px;
			white-space: pre-wrap;
		}
		.feed-actions {
			display: flex;
			gap: 12px;
			margin-top: 12px;
			align-items: center;
		}
		.btn-light {
			background: #f8fafc;
			border: 1px solid rgba(2,6,23,0.06);
			padding: 6px 10px;
			border-radius: 8px;
			font-size: 0.9rem;
			cursor: pointer;
		}
		@media(min-width: 768px) {
			.feed { max-width: 720px; margin: 0 auto; }
		}
	</style>
</head>
<body>
	<!-- ...existing code... -->
	<div class="profile-header">
		<div class="avatar">
			<!-- substitua src por variável do servidor / JS; fallback já tratado no backend -->
			<img id="profileAvatar" src="/static/images/default-avatar.png" alt="Avatar do usuário">
		</div>
		<div>
			<h2 id="profileName">Nome do Usuário</h2>
			<p id="profileBio" style="margin:0;color:#64748b;">Breve descrição</p>
		</div>
	</div>

	<main>
		<section class="feed" id="feedContainer">
			<!-- Os cartões do feed serão inseridos aqui via template ou JS -->
			<!-- Exemplo de um cartão (substitua pelo loop real) -->
			<div class="feed-card">
				<div class="feed-header">
					<div class="avatar" style="width:44px;height:44px;flex:0 0 44px;">
						<img src="/static/images/default-avatar.png" alt="avatar autor">
					</div>
					<div class="meta">
						<p class="feed-title">Título do post</p>
						<span class="feed-time">12 de jan · 14:35</span>
					</div>
				</div>
				<div class="feed-content">Resumo do conteúdo do post... texto limpo e truncado quando necessário.</div>
				<div class="feed-actions">
					<button class="btn-light">Curtir · 12</button>
					<button class="btn-light">Comentar · 3</button>
				</div>
			</div>
			<!-- ...existing code... -->
		</section>
	</main>

	<script>
		// ...existing code...
		// Exemplo de script que popula avatar e feed a partir do endpoint /api/feed
		async function carregarFeed() {
			try {
				const res = await fetch('/api/feed');
				const items = await res.json();
				const container = document.getElementById('feedContainer');
				container.innerHTML = '';
				items.forEach(item => {
					const card = document.createElement('div');
					card.className = 'feed-card';
					card.innerHTML = `
						<div class="feed-header">
							<div class="avatar" style="width:44px;height:44px;flex:0 0 44px;">
								<img src="${item.usuario.avatar_url}" alt="avatar ${item.usuario.nome}">
							</div>
							<div class="meta">
								<p class="feed-title">${item.titulo || item.usuario.nome}</p>
								<span class="feed-time">${item.created_at}</span>
							</div>
						</div>
						<div class="feed-content">${item.conteudo}</div>
						<div class="feed-actions">
							<button class="btn-light">Curtir · ${item.like_count || 0}</button>
							<button class="btn-light">Comentar · ${item.comment_count || 0}</button>
						</div>
					`;
					container.appendChild(card);
				});
				// Atualiza avatar do cabeçalho do perfil (se houver usuário atual no primeiro item)
				if (items[0] && items[0].usuario) {
					document.getElementById('profileAvatar').src = items[0].usuario.avatar_url;
					document.getElementById('profileName').textContent = items[0].usuario.nome || 'Usuário';
				}
			} catch (e) {
				console.error('Falha ao carregar feed', e);
			}
		}
		document.addEventListener('DOMContentLoaded', carregarFeed);
		// ...existing code...
	</script>
	<!-- ...existing code... -->
</body>
</html>