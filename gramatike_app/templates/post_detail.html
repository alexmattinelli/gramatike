<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Post #{{ post.id }} — Gramátike Edu</title>
  <link href="https://fonts.googleapis.com/css2?family=Mansalva&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { --primary:#9B5DE5; --border:#e5e7eb; --card:#fff; --bg:#f7f8ff; --text:#222; }
    * { box-sizing:border-box; }
    html, body { margin:0; padding:0; overflow-x:hidden; width:100%; max-width:100vw; }
    body { font-family:'Nunito', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    header.site-head { background:#9B5DE5; padding:28px clamp(16px,4vw,40px) 46px; border-bottom-left-radius:40px; border-bottom-right-radius:40px; position:relative; display:flex; flex-direction:column; align-items:center; max-width:100%; overflow-x:hidden; }
    .logo { font-family:'Mansalva', cursive; font-size:2.4rem; color:#fff; font-weight:400; margin:0; overflow-wrap:break-word; }
    /* Mobile: Header e layout mais compactos */
    @media (max-width: 768px) {
      header.site-head { padding:12px 16px 18px; max-width:100%; }
      .logo { font-size:1.5rem; max-width:100%; }
      main { padding:0 12px; margin:1rem auto 1.5rem; max-width:100%; overflow-x:hidden; }
      .card { padding:1rem 0.8rem; border-radius:18px; max-width:100%; box-sizing:border-box; }
      .post-header { gap:.6rem; flex-wrap:wrap; max-width:100%; }
      .post-avatar { width:48px; height:48px; flex-shrink:0; }
      .post-username { font-size:.95rem; line-height:1.3; word-break:break-word; max-width:100%; }
      .post-date { font-size:.7rem; width:100%; margin-left:0; margin-top:0.2rem; }
      .post-content { font-size:.95rem; line-height:1.5; word-wrap:break-word; overflow-wrap:break-word; max-width:100%; }
      .post-media { max-width:100%; overflow:hidden; }
      .post-media img { max-height:300px; border-radius:12px; }
    }
    main { width:100%; max-width:860px; margin:2rem auto 4rem; padding:0 clamp(16px,4vw,40px); overflow-x:hidden; }
    .card { background:var(--card); border:1px solid var(--border); border-radius:24px; padding:1.2rem 1.4rem; box-shadow:0 14px 30px -10px rgba(0,0,0,.12); max-width:100%; box-sizing:border-box; }
    .post-header { display:flex; align-items:center; gap:1rem; margin-bottom:.8rem; max-width:100%; }
    .post-avatar { width:54px; height:54px; border-radius:50%; object-fit:cover; border:3px solid #fff; box-shadow:0 3px 10px rgba(0,0,0,.18); flex-shrink:0; }
    .post-username { font-weight:800; color:#6233B5; word-break:break-word; max-width:100%; }
    .post-date { margin-left:auto; font-style:italic; color:#666; font-weight:600; }
    .post-content { font-size:1.15rem; line-height:1.6; white-space:pre-line; word-wrap:break-word; overflow-wrap:break-word; max-width:100%; }
    .post-media { max-width:100%; overflow:hidden; }
    .post-media img { width:100%; max-width:100%; height:auto; display:block; border-radius:18px; margin:.6rem 0; background:#f3f4f6; object-fit:contain; }
  </style>
</head>
<body>
  <header class="site-head">
    <h1 class="logo">Gramátike Edu</h1>
  </header>
  <main>
    <article class="card">
      <div class="post-header">
  {% set autor_avatar = post.usuario_id and (post.usuario_obj.foto_perfil if post.usuario_obj is defined else None) or None %}
  {% set avatar = autor_avatar or 'img/perfil.png' %}
  {% set is_abs = avatar.startswith('http://') or avatar.startswith('https://') %}
  <img class="post-avatar" src="{{ avatar if is_abs else url_for('static', filename=avatar) }}" alt="avatar" />
        <div class="post-username">@{{ post.usuario or 'usuárie' }}</div>
        <div class="post-date">{{ post.data.strftime('%d/%m/%Y %H:%M') if post.data else '' }}</div>
      </div>
      <div class="post-content">{{ post.conteudo }}</div>
      {% if images %}
        <div class="post-media">
          {% for img in images %}
            <img src="{{ url_for('static', filename=img) }}" alt="imagem do post" />
          {% endfor %}
        </div>
      {% endif %}
    </article>
  </main>
</body>
</html>
